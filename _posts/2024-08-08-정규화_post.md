---
title: 데이터베이스 정규화
date: 2024-08-08 20:30:00 +09:00
categories: [DBMS]
tags: [cs, database,  normalization, db normalizatio, 1nf, 2nf, 3nf ]     # TAG names should always be lowercase
---

 


정규화에 대해 정리를 기록합니다.


## 1NF (제 1정규형: First Normal Form)
- 정의 : 테이블의 모든 도메인이 원자값(Atomic Value)으로 이루어져야 한다.
- 목표 : 테이블의 모든 도메인은 한 개의 값만 가져야 합니다.
- 특징
  - 각 컬럼의 값은 단일 값이어야 하며, 중복된 데이터나 집합, 배열 등의 구조가 포함되어서는 안 된다.
  - 테이블의 모든 레코드가 동일한 수의 속성을 가져야 한다.
- 설명 
  - 원자값이 아닌 도메인을 분해하여 각 필드가 단일 값을 가지도록 구성한다.
  - 데이터를 하나의 셀에 여러 개의 값으로 저장하지 말고, 하나의 셀에는 항상 단일 값만 들어가도록 해야 합니다.
  - 제 1정규화는 테이블에서 각 셀이 더 이상 쪼갤 수 없는 하나의 값만 포함하도록 데이터를 정리하는 과정입니다.

> **목표 :** 각 컬럼이 원자값을 가지도록 테이블을 정리합니다.

<br>

### 1NF 예시

**원자성을 위반한 테이블 (1NF 위반)**

| 학생ID | 이름   | 수업       |
| ------ | ------ | ---------- |
| 1      | 홍길동 | 수학, 과학 |
| 2      | 김철수 | 영어       |


여기서 `수업` 컬럼은 여러 과목이 하나의 셀에 포함되어 있어 1NF를 위반합니다.

<br>

**1NF를 만족시키기 위한 테이블**

| 학생ID | 이름   | 수업 |
| ------ | ------ | ---- |
| 1      | 홍길동 | 수학 |
| 1      | 홍길동 | 과학 |
| 2      | 김철수 | 영어 |

**설명**: 각 컬럼이 단일 값을 가지도록 `수업` 컬럼을 분해했습니다.


- 1NF 위반 : 수학, 과학처럼 하나의 셀에 여러 개의 값이 들어간 경우.
- 1NF 만족 : 수학과 과학을 각각 별도의 행으로 나누어 저장.

<br>
<br>
 
## 2NF (제 2정규형: Second Normal Form)
- 정의 : 모든 속성이 기본키에 대해 완전 함수 종속 관계를 만족해야 한다.
- 특징
  - 1NF를 만족해야 한다.
  - 기본키의 일부에만 종속되는 부분 함수 종속(Partial Dependency)을 제거해야 한다.
  - 기본키 전체에 대해 종속된 속성만 남기도록 테이블을 재구성한다.
- 설명
  - 부분 함수 종속을 제거하여 모든 속성이 기본키 전체에 완전하게 종속되도록 테이블을 분할한다.
  - 테이블의 모든 컬럼이 기본키 전체에 따라 결정되도록 해야 하며, 일부 기본키에만 의존하는 컬럼이 있으면 안 됩니다.
  - 2정규화는 모든 컬럼이 기본키 전체에 의해 결정되도록 하는 과정으로, 기본키의 일부에만 의존하는 컬럼이 없도록 테이블을 분리하는 작업입니다.

- 완전 함수 종속 : 모든 컬럼이 기본키 전체에 종속되어야 합니다. 즉, 기본키의 일부가 아닌 전체에 의해 결정되어야 합니다.
- 부분 함수 종속 : 컬럼이 기본키의 일부에만 종속되어 있는 경우입니다.

<br>

### 2NF 예시

**2NF를 만족시키기 위한 테이블**

**테이블 1: 학생-수업 관계**

| 학생ID | 수업 |
| ------ | ---- |
| 1      | 수학 |
| 1      | 과학 |
| 2      | 영어 |

<br>

**테이블 2: 수업-선생님 관계**

| 수업 | 선생님 |
| ---- | ------ |
| 수학 | 이선생 |
| 과학 | 김선생 |
| 영어 | 박선생 |

<br>

**설명**: 부분 함수 종속을 제거하기 위해 `학생-수업` 테이블과 `수업-선생님` 테이블로 분리했습니다.


- 2NF 위반: 학생ID와 과목이 기본키인 테이블에서, '선생님' 컬럼이 과목에만 종속되어 있다면 이는 부분 함수 종속입니다.
- 2NF 만족: 이를 분리해 '학생-과목'과 '과목-선생님' 테이블로 나누어야 합니다.

<br>
<br>

## 3NF (제 3정규형: Third Normal Form)
- 정의 : **이행적 함수 종속(Transitive Dependency)**이 제거되어야 한다.
- 특징 :
- 2NF를 만족해야 한다.
- 기본키가 아닌 속성 간의 함수 종속 관계(즉, 기본키가 아닌 속성이 다른 비키 속성에 종속되는 경우)를 제거한다.
- 설명 
  - 이행적 종속을 제거하여 모든 비키 속성(Non-Key Attribute)이 오직 기본키에만 종속되도록 테이블을 재구성한다.
  - 기본키가 아닌 다른 컬럼들 간의 종속 관계가 없어야 합니다. 즉, 하나의 컬럼이 기본키 외의 다른 컬럼에 의해 결정되면 안 됩니다.
  - 제 3정규화는 기본키가 아닌 다른 컬럼들 간의 종속성을 제거하여 데이터의 무결성을 높이는 과정입니다. 이를 통해 불필요한 중복과 종속 관계를 없애게 됩니다.
- 이행적 함수 종속: 기본키가 아닌 다른 컬럼에 의해 결정되는 또 다른 컬럼이 존재할 때 발생합니다.

<br>

**목표**: 이행적 함수 종속을 제거하여 비키 속성 간의 종속성을 없앱니다.

<br>

### 3NF 예시

**2NF를 만족하지만 3NF를 위반한 테이블**
 
| 학생ID | 수업 | 선생님 | 교실  |
| ------ | ---- | ------ | ----- |
| 1      | 수학 | 이선생 | 101호 |
| 1      | 과학 | 김선생 | 202호 |
| 2      | 영어 | 박선생 | 303호 |

<br>

여기서 `교실`은 `수업`이 아닌 `선생님`에 의해 결정됩니다. 이는 `학생ID -> 수업 -> 선생님 -> 교실`과 같은 이행적 종속을 나타내며, 3NF를 위반합니다.

<br>

**3NF를 만족시키기 위한 테이블**

**테이블 1: 학생-수업 관계**

| 학생ID | 수업 |
| ------ | ---- |
| 1      | 수학 |
| 1      | 과학 |
| 2      | 영어 |

<br>

**테이블 2: 수업-선생님 관계**

| 수업 | 선생님 |
| ---- | ------ |
| 수학 | 이선생 |
| 과학 | 김선생 |
| 영어 | 박선생 |

<br>

**테이블 3: 선생님-교실 관계**

| 선생님 | 교실  |
| ------ | ----- |
| 이선생 | 101호 |
| 김선생 | 202호 |
| 박선생 | 303호 |

<br>

**설명**: 이행적 종속을 제거하기 위해 `선생님-교실` 테이블을 분리하여 3NF를 만족시켰습니다.

예시:
3NF 위반: 학생ID -> 과목 -> 교실과 같이, '교실'이 기본키가 아닌 '과목'에 의해 결정되는 경우.
3NF 만족: '과목'과 '교실'의 관계를 별도의 테이블로 분리해야 합니다.

<br>
<br>

## BCNF (보이스-코드 정규형: Boyce-Codd Normal Form)
- 정의 : 모든 **결정자(Determinant)**가 후보키(Candidate Key)여야 한다.
- 특징
  - 3NF를 강화한 형태로, 결정자가 후보키가 아닌 경우를 제거한다.
  - 후보키가 아닌 속성이 테이블 내 다른 속성에 영향을 줄 수 없도록 한다.
- 설명 : 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 모든 결정자가 후보키가 되도록 한다.

<br>
<br>

## 4NF (제 4정규형: Fourth Normal Form)
- 정의 : 다치 종속(Multivalued Dependency)이 제거되어야 한다.
- 특징
  - BCNF를 만족해야 한다.
  - 다치 종속이 있는 경우, 이를 제거하여 여러 값이 독립적으로 반복될 수 있는 상황을 방지한다.
- 설명 : 다치 종속 관계를 제거하여 한 속성이 여러 값의 집합을 가질 수 없도록 한다.

<br>
<br>

## 5NF (제 5정규형: Fifth Normal Form)
- 정의 : 후보키를 통하지 않는 **조인 종속(Join Dependency)**이 제거되어야 한다.
- 특징 
  - 4NF를 만족해야 한다.
  - 후보키를 사용하지 않은 경우 발생할 수 있는 조인 종속성을 제거하여 데이터의 무손실 분해(Lossless Decomposition)를 보장한다.
- 설명 : 후보키를 통하지 않는 조인 종속을 제거하여 데이터가 여러 테이블로 나뉘더라도 정보 손실 없이 복원될 수 있도록 한다.



## 정리 요약

	1NF   
    - 모든 도메인이 원자값으로만 이루어질 때
    - 원자값이 아닌 도메인을 분해


	2NF  
	- 모든 속성이 기본키에 대하여 완전 함수 종속 관계를 만족할 때
	- 부분 함수 종속 제거


	3NF  
	- 모든 속성이 이행적 함수 종속이 되지 않을 때
	- 이행 함수 종속 제거


	BCNF  
	- 모든 결정자가 후보키이면 만족
	- 결정자가 후보키가 아닌 함수 종속 제거 


	4NF  
	- 다치 종속관계가 성럽하는 경우 다치 종속을 제거


	5NF  
	- 후보키를 통하지 않는 조인종속 제거
